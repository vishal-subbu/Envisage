//
// Copyright (c) 2018, Vishal_S
// All rights reserved. Please read the "license.txt" for license terms.
//
// Project Title: Waterfall Graphic Print
//
// Developer: Vishal S
//
// Contact Info: vishalsubbu97@gmail.com
//
//*************************************************************
//   CODE TO WRITE INFORMATION INTO TWO SHIFT REGISTERS
//                   USING COMMON PINS
//*************************************************************

//Pin connected to ST_CP(12) of 74HC595
int latchPin = 12;
//Pin connected to SH_CP(11) of 74HC595,CLK od SD
int clockPin = 11;
////Pin connected to DS(14) of 74HC595,MOSI
int dataPin = 8;


//*********************************************
//                  HEADER FILES
//*********************************************
#include <SPI.h>
#include <EEPROM.h>


// Variables for holding values 
byte shift[8];

byte values[]={129,252,3,255,240,31,223,128,193,254,3,249,240,31,207,128,225,254,3,248,240,31,199,128,241,254,3,248,112,31,195,128,253,254,3,248,48,31,192,128,255,254,3,248,0,31,192,0,254,254,3,248,8,31,192,64,254,126,3,248,12,31,192,112,254,62,3,248,14,31,192,120,254,14,3,248,15,31,192,124,254,6,3,248,15,223,192,126,254,0,3,248,15,255,192,127,254,2,3,248,15,239,192,127,254,3,3,248,15,231,192,127,254,3,131,248,15,227,192,127,254,3,195,248,15,225,192,127,254,3,227,248,15,224,192,127,254,3,243,248,15,224,64,127,254,3,255,248,15,224,0,127,126,3,249,248,15,224,32,127,62,3,248,248,15,224,48,127,30,3,248,120,15,224,56,127,14,3,248,56,15,224,60,127,6,3,248,24,15,224,62,127,2,3,248,8,15,224,63,127,0,3,248,0,15,224,63,255,1,3,248,8,15,224,63,191,1,131,248,12,15,224,63,159,1,195,248,14,15,224,63,143,1,195,248,15,15,224,63,135,1,227,248,15,143,224,63,131,1,243,248,15,207,224,63,129,1,251,248,15,239,224,63,128,1,255,248,15,255,224,63,128,1,255,248,15,247,224,63,128,1,252,248,15,247,224,63,128,1,252,248,15,243,224,63,128,1,252,120,15,241,224,63,128,1,252,56,15,240,224,63,128,1,252,24,15,240,96,63,128,1,252,8,15,240,96,63,128,1,252,8,15,240,32,63,128,1,252,0,15,240,0,63,128,129,252,0,15,240,16,63,128,129,252,6,15,240,16,63,128,193,252,6,15,240,24,63,128,225,252,7,15,240,28,63,128,225,252,7,143,240,28,63,128,241,252,7,143,240,30,63,128,249,252,7,207,240,31,63,128,249,252,7,239,240,31,63,128,253,252,7,239,240,31,191,128,255,252,7,255,240,31,255,128,255,252,7,255,240,31,255,128,254,252,7,247,240,31,223,128,254,252,7,243,240,31,223,128,254,124,7,243,240,31,207,128,254,60,7,241,240,31,199,128,254,60,7,241,240,31,199,128,254,28,7,240,240,31,195,128,254,28,7,240,240,31,195,128,254,12,7,240,112,31,193,128,254,12,7,240,112,31,193,128,254,4,7,240,48,31,192,128,254,4,7,240,48,31,192,128,254,4,7,240,0,31,192,0,254,0,7,240,0,31,192,0,254,0,7,240,0,31,192,0,254,0,7,240,0,31,192,64,254,2,7,240,16,31,192,64,254,2,7,240,24,31,192,96,254,3,7,240,24,31,192,96,254,3,7,240,28,31,192,96,254,3,135,240,28,31,192,112,254,3,135,240,28,31,192,112,254,3,135,240,30,31,192,112,254,3,199,240,30,31,192,120,254,3,199,240,30,31,192,120,254,3,199,240,31,31,192,120,254,3,231,240,31,31,192,120,254,3,231,240,31,31,192,124,254,3,231,240,31,31,192,124,254,3,231,240,31,159,192,124,254,3,247,240,31,159,192,124,254,3,247,240,31,159,192,126,254,3,247,240,31,159,192,126,254,3,247,240,31,159,192,126,254,3,247,240,31,223,192,126,254,3,247,240,31,223,192,126,254,3,255,240,31,223,192,126,254,3,255,240,31,223,192,127,254,3,255,240,31,255,192,127,254,3,255,240,31,255,192,127,254,3,255,240,31,255,192,127,254,3,255,240,31,255,192,127,254,3,255,240,31,255,192,127,254,3,255,240,15,255,192,127,254,3,255,240,15,255,192,127,254,3,255,240,15,255,192,127,254,3,255,240,15,255,192,127};
int length=800;
int d=10;
int index=0;

void setup()
{
  pinMode(latchPin,OUTPUT);
  pinMode(clockPin, OUTPUT );
  pinMode(dataPin, OUTPUT );
  Serial.begin(57600);
}//  END OF SETUP 


void loop()
{
  digitalWrite(latchPin,0);
  for(int i=0;i<8;i++)
  {
    shift[i]=values[index];
    index++;
  }
  for(int j=0;j<8;j++)
  {
    shiftOut(shift[j]);
  }
  digitalWrite(latchPin,1);
  Serial.println();
  if(index>=length)
    index=0;
  delay(d); 


}//    END OF LOOP


void shiftOut(byte value)
{
  int i=0;
  int pinstate;
  digitalWrite(dataPin,0);
  digitalWrite(clockPin,0);
  for(i=7;i>=0;i--)
    {
      digitalWrite(clockPin,0);
      if ( value & (1<<i) ) 
        {
          pinstate= 1;
        }
      else 
        {	
          pinstate= 0;
        }
      digitalWrite(dataPin,pinstate);
      Serial.print(pinstate);
      digitalWrite(clockPin,1);
      digitalWrite(dataPin,0);
    }
    digitalWrite(clockPin,0) ;
    
}//   END OF SHIFT OUT
